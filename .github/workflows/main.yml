on: [push]

jobs:
  prod_build_job:
    runs-on: ubuntu-latest
    name: A job to build packages for prod repo
    steps:
    - name: Log Step
      id: greet
      uses: napagroup/grape-ui-react/.github/actions/log-github@devops/41
      with:
        who-to-greet: 'User'
    # Use the output from the `greet` step
    - name: Time of log
      run: echo "The time was ${{ steps.greet.outputs.time }}"
    - name: Set environment variables
      run: echo ${{ github.repository }}
      env:
        SOURCE_REPO: napagroup/grape-ui-marketing
        TARGET_REPO: napagroup/grape-ui-production
    - name: Checkout repo
      uses: actions/checkout@v2
      with:
        repository: ${{ SOURCE_REPO }}
        path: main
    - name: Setup Node.js environment
      uses: actions/setup-node@v1
      with:
        node-version: 12
    - name: Confirm node and checkout setup
      run: |
        node -v
        npm -v
        echo $GITHUB_WORKSPACE/main
        ls -li $GITHUB_WORKSPACE/main
    - name: install and build source repo
      run: |
        cd $GITHUB_WORKSPACE/main
        npm install
        npm run build
        ls -li $GITHUB_WORKSPACE/main/


